(this.webpackJsonpmern=this.webpackJsonpmern||[]).push([[0],{60:function(e,t,a){e.exports=a(95)},65:function(e,t,a){},66:function(e,t,a){},72:function(e,t,a){},73:function(e,t,a){},93:function(e,t,a){},94:function(e,t,a){},95:function(e,t,a){"use strict";a.r(t);var n=a(0),o=a.n(n),r=a(17),c=a.n(r),i=a(23),s=(a(65),a(20)),l=a(120),u=a(122),m=a(123),p=a(124);a(66);const d=Object(l.a)(e=>({root:{flexGrow:1},menuButton:{marginRight:e.spacing(2)}}));function g(){const e=d();return o.a.createElement("div",{className:e.root},o.a.createElement(u.a,{position:"static"},o.a.createElement(m.a,{variant:"dense"},o.a.createElement(p.a,{variant:"h6",color:"inherit",className:"logo"},"Google Books"),o.a.createElement(i.b,{to:"/",className:"link"},"Search"),o.a.createElement(i.b,{to:"/saved",className:"link"},"Saved"))))}a(72);function f(){return o.a.createElement("header",{className:"header"},o.a.createElement("h1",null,"React Google Books Search"))}var b=a(19),h=a(97),v=a(128),k=a(125),x=a(52),E=a.n(x);a(73);const w=Object(l.a)(e=>({root:{padding:"2px 4px",display:"flex",alignItems:"center","max-width":"60%",margin:"30px auto",background:"linear-gradient(90deg, #3a47d5 0%, #00d2ff 100%) !important",boxShadow:"5px 5px 0px 0px #289fed, 10px 10px 0px 0px #5fb8ff,\n    15px 15px 0px 0px #a1d8ff, 20px 20px 0px 0px #cae6ff,\n    25px 25px 0px 0px #e1eeff, 5px 5px 15px 5px rgba(0, 0, 0, 0);",transform:"translateX(-25px)"},input:{marginLeft:e.spacing(1),flex:1,width:"350px"},iconButton:{padding:"10px","margin-right":"auto"}}));function O(e){const t=w();return o.a.createElement(h.a,{component:"form",className:"".concat(t.root," searchbox"),onSubmit:t=>{t.preventDefault(),e.onChange(t.currentTarget.elements[0].value)}},o.a.createElement(v.a,{className:t.input,placeholder:"What do you feel to search? \ud83d\udcad",inputProps:{"aria-label":"search books",autoFocus:!0}}),o.a.createElement(k.a,{type:"submit",className:t.iconButton,"aria-label":"search"},o.a.createElement(E.a,null)))}var j=e=>o.a.createElement("div",null,e.accessory,e.children),y=a(21),N=a.n(y),S=a(31),L=a(32),B=a.n(L);var C=(e,t)=>{const a=Object(n.useState)(""),o=Object(b.a)(a,2),r=o[0],c=o[1];return Object(n.useEffect)(()=>{if(e){(function(){var t=Object(S.a)(N.a.mark((function t(){var a,n;return N.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,B.a.get(e);case 3:a=t.sent,n=a.data,c(n),t.next=11;break;case 8:t.prev=8,t.t0=t.catch(0),console.log("\ud83d\udea8",t.t0);case 11:case"end":return t.stop()}}),t,null,[[0,8]])})));return function(){return t.apply(this,arguments)}})()()}else c(null)},[e,t]),r},T=a(126),W=a(127),_=a(53),R=a.n(_);a(93);var A=e=>{const t=o.a.useState(!1),a=Object(b.a)(t,2),n=a[0],r=a[1],c=(e,t)=>{"clickaway"!==t&&r(!1)},i=function(){var e=Object(S.a)(N.a.mark((function e(t){var a,n,o,c,i,s,l;return N.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=t.target.closest("button").getAttribute("data"),n=JSON.parse(a),o=n.title,c=n.authors,i=n.description,s=n.imageLinks.thumbnail,l=n.infoLink,e.next=4,B.a.post("/api/books",{title:o,authors:c,description:i,image:s,link:l});case 4:"success"===e.sent.data.status&&r(!0);case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),s=function(){var t=Object(S.a)(N.a.mark((function t(a){var n;return N.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=a.target.closest("button").getAttribute("id"),t.next=3,B.a.delete("/api/books/".concat(n));case 3:e.setReloadToggler(!e.reloadToggler);case 4:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}();return o.a.createElement("div",{className:"bookbox"},o.a.createElement("img",{style:{width:"128px"},src:e.imageLinks?e.imageLinks.thumbnail:e.image?e.image:"https://books.google.com/googlebooks/images/no_cover_thumb.gif",alt:"book-cover-".concat(e.title)}),o.a.createElement("div",{className:"bookbox-text"},o.a.createElement("div",{className:"bookbox-top"},o.a.createElement("p",{className:"bookbox-title"},o.a.createElement("span",{className:"bookbox-title--main"},e.title),e.authors&&o.a.createElement("span",{className:"bookbox-authors"},"Written By ",e.authors.map((t,a,n)=>o.a.createElement("span",{key:"".concat(e.infoLink?e.infoLink:e.link,"-").concat(a)},a!==n.length-1?"".concat(t,", "):"".concat(t))))),o.a.createElement("div",{className:"bookbox-button"},o.a.createElement(T.a,{variant:"outlined",color:"primary",href:e.infoLink?e.infoLink:e.link,target:"_blank"},"View"),e.isSearch?o.a.createElement(T.a,{variant:"outlined",color:"secondary",target:"_blank",onClick:i,data:JSON.stringify(e)},"Save"):o.a.createElement(T.a,{variant:"outlined",color:"secondary",target:"_blank",onClick:s,id:e._id},"Delete"))),o.a.createElement("p",{className:"bookbox-desc"},e.description)),o.a.createElement(W.a,{anchorOrigin:{vertical:"top",horizontal:"center"},open:n,autoHideDuration:1e3,onClose:c,message:"The book is saved!",action:o.a.createElement(o.a.Fragment,null,o.a.createElement(k.a,{size:"small","aria-label":"close",color:"inherit",onClick:c},o.a.createElement(R.a,{fontSize:"small"})))}))};var J=({isSearch:e})=>{const t=Object(n.useState)(""),a=Object(b.a)(t,2),r=a[0],c=a[1],i=Object(n.useState)(null),s=Object(b.a)(i,2),l=s[0],u=s[1],m=Object(n.useState)(!1),p=Object(b.a)(m,2),d=p[0],g=p[1],f=Object(n.useMemo)(()=>e&&o.a.createElement(O,{onChange:c}),[e]);Object(n.useEffect)(()=>{e&&r&&(u("https://www.googleapis.com/books/v1/volumes?q=".concat(r)),c("")),e||(u("/api/books"),c("")),e&&!r&&u("")},[r,e,d]);const h=C(l,d);let v=[];return h&&e&&h&&(v=[...new Map(h.items.map(e=>[e.id,e])).values()]),o.a.createElement("div",null,o.a.createElement(j,{title:"title",accessory:f,books:h},e&&h?v.map((e,t)=>o.a.createElement(A,Object.assign({key:"searched-".concat(e.id,"-").concat(t)},e.volumeInfo,{isSearch:!0}))):!e&&h&&h.type?h.items.map((e,t)=>o.a.createElement(A,Object.assign({key:"saved-".concat(e.id,"-").concat(t),id:e.id},e,{reloadToggler:d,setReloadToggler:g}))):""))};a(94);var z=function(){return o.a.createElement("div",{className:"App"},o.a.createElement(g,null),o.a.createElement(f,null),o.a.createElement(s.c,null,o.a.createElement(s.a,{exact:!0,path:"/",render:e=>o.a.createElement(J,Object.assign({},e,{isSearch:!0}))}),o.a.createElement(s.a,{path:"/saved",render:e=>o.a.createElement(J,Object.assign({},e,{isSearch:!1}))})))};const D=Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));function G(e){navigator.serviceWorker.register(e).then(e=>{e.onupdatefound=()=>{const t=e.installing;t.onstatechange=()=>{"installed"===t.state&&(navigator.serviceWorker.controller?console.log("New content is available; please refresh."):console.log("Content is cached for offline use."))}}}).catch(e=>{console.error("Error during service worker registration:",e)})}c.a.render(o.a.createElement(i.a,null,o.a.createElement(z,null)),document.getElementById("root")),function(){if("serviceWorker"in navigator){if(new URL("",window.location).origin!==window.location.origin)return;window.addEventListener("load",()=>{const e="".concat("","/service-worker.js");D?function(e){fetch(e).then(t=>{404===t.status||-1===t.headers.get("content-type").indexOf("javascript")?navigator.serviceWorker.ready.then(e=>{e.unregister().then(()=>{window.location.reload()})}):G(e)}).catch(()=>{console.log("No internet connection found. App is running in offline mode.")})}(e):G(e)})}}()}},[[60,1,2]]]);
//# sourceMappingURL=main.4d21854e.chunk.js.map