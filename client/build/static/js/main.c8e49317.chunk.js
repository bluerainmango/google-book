(this.webpackJsonpmern=this.webpackJsonpmern||[]).push([[0],{60:function(e,t,a){e.exports=a(95)},65:function(e,t,a){},66:function(e,t,a){},72:function(e,t,a){},73:function(e,t,a){},93:function(e,t,a){},94:function(e,t,a){},95:function(e,t,a){"use strict";a.r(t);var n=a(0),o=a.n(n),c=a(17),r=a.n(c),s=a(23),l=(a(65),a(20)),i=a(120),m=a(122),u=a(123),p=a(124);a(66);const d=Object(i.a)(e=>({root:{flexGrow:1},menuButton:{marginRight:e.spacing(2)}}));function b(){const e=d();return o.a.createElement("div",{className:e.root},o.a.createElement(m.a,{position:"static"},o.a.createElement(u.a,{variant:"dense"},o.a.createElement(p.a,{variant:"h6",color:"inherit",className:"logo"},"Google Books"),o.a.createElement(s.b,{to:"/",className:"link"},"Search"),o.a.createElement(s.b,{to:"/saved",className:"link"},"Saved"))))}a(72);function g(){return o.a.createElement("header",{className:"header"},o.a.createElement("h1",null,"React Google Books Search"))}var f=a(19),h=a(97),x=a(128),k=a(125),v=a(52),E=a.n(v);a(73);const w=Object(i.a)(e=>({root:{padding:"2px 4px",display:"flex",alignItems:"center","max-width":"60%",margin:"30px auto",background:"linear-gradient(90deg, #3a47d5 0%, #00d2ff 100%) !important",boxShadow:"5px 5px 0px 0px #289fed, 10px 10px 0px 0px #5fb8ff,\n    15px 15px 0px 0px #a1d8ff, 20px 20px 0px 0px #cae6ff,\n    25px 25px 0px 0px #e1eeff, 5px 5px 15px 5px rgba(0, 0, 0, 0);",transform:"translateX(-25px)"},input:{marginLeft:e.spacing(1),flex:1,width:"350px"},iconButton:{padding:"10px","margin-right":"auto"}}));function O(e){const t=w();return o.a.createElement(h.a,{component:"form",className:"".concat(t.root," searchbox"),onSubmit:t=>{t.preventDefault(),e.onChange(t.currentTarget.elements[0].value)}},o.a.createElement(x.a,{className:t.input,placeholder:"What do you feel to search? \ud83d\udcad",inputProps:{"aria-label":"search books",autoFocus:!0}}),o.a.createElement(k.a,{type:"submit",className:t.iconButton,"aria-label":"search"},o.a.createElement(E.a,null)))}var j=e=>o.a.createElement("div",null,e.accessory,e.children),y=a(21),S=a.n(y),N=a(31),B=a(32),L=a.n(B);var C=(e,t)=>{const a=Object(n.useState)(""),o=Object(f.a)(a,2),c=o[0],r=o[1];return Object(n.useEffect)(()=>{if(e){(function(){var t=Object(N.a)(S.a.mark((function t(){var a,n;return S.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,L.a.get(e);case 3:a=t.sent,n=a.data,r(n),t.next=11;break;case 8:t.prev=8,t.t0=t.catch(0),console.log("\ud83d\udea8",t.t0);case 11:case"end":return t.stop()}}),t,null,[[0,8]])})));return function(){return t.apply(this,arguments)}})()()}else r(null)},[e,t]),c},D=a(126),I=a(127),T=a(53),_=a.n(T);a(93);var J=e=>{const t=o.a.useState(!1),a=Object(f.a)(t,2),n=a[0],c=a[1],r=o.a.useState(""),s=Object(f.a)(r,2),l=s[0],i=s[1],m=(e,t)=>{"clickaway"!==t&&c(!1)},u=function(){var e=Object(N.a)(S.a.mark((function e(t){var a,n,o,r,s,l,m,u;return S.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=t.target.closest("button").getAttribute("data"),n=JSON.parse(a),o=n.title,r=n.authors,s=n.description,l=n.imageLinks.thumbnail,m=n.infoLink,u=n.gbID,e.prev=2,e.next=5,L.a.post("/api/books",{title:o,authors:r,description:s,image:l,link:m,gbID:u});case 5:"success"===e.sent.data.status&&(i("\ud83d\udcda The book is saved!"),c(!0)),e.next=12;break;case 9:e.prev=9,e.t0=e.catch(2),"duplicated Book"===e.t0.response.data.code&&(i(e.t0.response.data.message),c(!0));case 12:case"end":return e.stop()}}),e,null,[[2,9]])})));return function(t){return e.apply(this,arguments)}}(),p=function(){var t=Object(N.a)(S.a.mark((function t(a){var n;return S.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=a.target.closest("button").getAttribute("id"),t.next=3,L.a.delete("/api/books/".concat(n));case 3:e.setReloadToggler(!e.reloadToggler);case 4:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}();return o.a.createElement("div",{className:"bookbox"},o.a.createElement("img",{style:{width:"128px"},src:e.imageLinks?e.imageLinks.thumbnail:e.image?e.image:"https://books.google.com/googlebooks/images/no_cover_thumb.gif",alt:"book-cover-".concat(e.title)}),o.a.createElement("div",{className:"bookbox-text"},o.a.createElement("div",{className:"bookbox-top"},o.a.createElement("p",{className:"bookbox-title"},o.a.createElement("span",{className:"bookbox-title--main"},e.title),e.authors&&o.a.createElement("span",{className:"bookbox-authors"},"Written By ",e.authors.map((t,a,n)=>o.a.createElement("span",{key:"".concat(e.infoLink?e.infoLink:e.link,"-").concat(a)},a!==n.length-1?"".concat(t,", "):"".concat(t))))),o.a.createElement("div",{className:"bookbox-button"},o.a.createElement(D.a,{variant:"outlined",color:"primary",href:e.infoLink?e.infoLink:e.link,target:"_blank"},"View"),e.isSearch?o.a.createElement(D.a,{variant:"outlined",color:"secondary",target:"_blank",onClick:u,data:JSON.stringify(e)},"Save"):o.a.createElement(D.a,{variant:"outlined",color:"secondary",target:"_blank",onClick:p,id:e._id},"Delete"))),o.a.createElement("p",{className:"bookbox-desc"},e.description)),o.a.createElement(I.a,{anchorOrigin:{vertical:"top",horizontal:"center"},open:n,autoHideDuration:1500,onClose:m,message:l,action:o.a.createElement(o.a.Fragment,null,o.a.createElement(k.a,{size:"small","aria-label":"close",color:"inherit",onClick:m},o.a.createElement(_.a,{fontSize:"small"})))}))};var R=({isSearch:e})=>{const t=Object(n.useState)(""),a=Object(f.a)(t,2),c=a[0],r=a[1],s=Object(n.useState)(null),l=Object(f.a)(s,2),i=l[0],m=l[1],u=Object(n.useState)(!1),p=Object(f.a)(u,2),d=p[0],b=p[1],g=Object(n.useMemo)(()=>e&&o.a.createElement(O,{onChange:r}),[e]);Object(n.useEffect)(()=>{e&&c&&(m("https://www.googleapis.com/books/v1/volumes?q=".concat(c)),r("")),e||(m("/api/books"),r("")),e&&!c&&m("")},[c,e,d]);const h=C(i,d);let x=[];return h&&e&&h&&(x=[...new Map(h.items.map(e=>[e.id,e])).values()]),o.a.createElement("div",null,o.a.createElement(j,{title:"title",accessory:g,books:h},e&&h?x.map((e,t)=>o.a.createElement(J,Object.assign({key:"searched-".concat(e.id,"-").concat(t)},e.volumeInfo,{gbID:e.id,isSearch:!0}))):!e&&h&&h.type?h.items.map((e,t)=>o.a.createElement(J,Object.assign({key:"saved-".concat(e.id,"-").concat(t),id:e.id},e,{reloadToggler:d,setReloadToggler:b}))):""))};a(94);var z=function(){return o.a.createElement("div",{className:"App"},o.a.createElement(b,null),o.a.createElement(g,null),o.a.createElement(l.c,null,o.a.createElement(l.a,{exact:!0,path:"/",render:e=>o.a.createElement(R,Object.assign({},e,{isSearch:!0}))}),o.a.createElement(l.a,{path:"/saved",render:e=>o.a.createElement(R,Object.assign({},e,{isSearch:!1}))})))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));r.a.render(o.a.createElement(s.a,null,o.a.createElement(z,null)),document.getElementById("root"))}},[[60,1,2]]]);
//# sourceMappingURL=main.c8e49317.chunk.js.map