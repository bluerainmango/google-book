(this.webpackJsonpmern=this.webpackJsonpmern||[]).push([[0],{52:function(e,t,a){e.exports=a(87)},57:function(e,t,a){},58:function(e,t,a){},64:function(e,t,a){},85:function(e,t,a){},86:function(e,t,a){},87:function(e,t,a){"use strict";a.r(t);var n=a(0),o=a.n(n),r=a(19),c=a.n(r),i=a(20),s=(a(57),a(16)),l=a(109),u=a(111),m=a(112),d=a(113);a(58);const p=Object(l.a)(e=>({root:{flexGrow:1},menuButton:{marginRight:e.spacing(2)}}));function g(){const e=p();return o.a.createElement("div",{className:e.root},o.a.createElement(u.a,{position:"static"},o.a.createElement(m.a,{variant:"dense"},o.a.createElement(d.a,{variant:"h6",color:"inherit"},"Google Books"),o.a.createElement(i.b,{to:"/",className:"link"},"Search"),o.a.createElement(i.b,{to:"/saved",className:"link"},"Saved"))))}a(64);function b(){return o.a.createElement("header",{className:"header"},o.a.createElement("h1",null,"React Google Books Search"),o.a.createElement("p",null,"Search for and Save books of Interest"))}var h=a(27),f=a(89),v=a(116),k=a(114),E=a(45),w=a.n(E);const x=Object(l.a)(e=>({root:{padding:"2px 4px",display:"flex",alignItems:"center",width:200,margin:"10px auto"},input:{marginLeft:e.spacing(1),flex:1},iconButton:{padding:"10px"}}));function O(e){const t=x();return console.log("\u26bd\ufe0f",e),o.a.createElement(f.a,{component:"form",className:t.root,onSubmit:t=>{t.preventDefault(),e.onChange(t.currentTarget.elements[0].value),console.log("\ud83c\udfd3inside handle submit value",t.currentTarget.elements[0].value)}},o.a.createElement("div",null,o.a.createElement(v.a,{className:t.input,placeholder:"Search",inputProps:{"aria-label":"search books"}})),o.a.createElement(k.a,{type:"submit",className:t.iconButton,"aria-label":"search"},o.a.createElement(w.a,null)))}var j=e=>(console.log("\ud83c\udfb1props:",e),o.a.createElement("div",null,e.accessory,e.children)),y=a(17),N=a.n(y),S=a(25),L=a(26),B=a.n(L);var _=e=>{const t=Object(n.useState)(""),a=Object(h.a)(t,2),o=a[0],r=a[1];return Object(n.useEffect)(()=>{if(e){(function(){var t=Object(S.a)(N.a.mark((function t(){var a,n;return N.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,B.a.get(e);case 3:a=t.sent,n=a.data,r(n),t.next=11;break;case 8:t.prev=8,t.t0=t.catch(0),console.log("\ud83d\udea8",t.t0);case 11:case"end":return t.stop()}}),t,null,[[0,8]])})));return function(){return t.apply(this,arguments)}})()()}else r(null)},[e]),o},C=a(115);a(85);var W=e=>{const t=function(){var e=Object(S.a)(N.a.mark((function e(t){var a,n,o,r,c,i,s,l;return N.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=t.target.closest("button").getAttribute("data"),n=JSON.parse(a),o=n.title,r=n.authors,c=n.description,i=n.imageLinks.thumbnail,s=n.infoLink,e.next=4,B.a.post("/api/books",{title:o,authors:r,description:c,image:i,link:s});case 4:l=e.sent,console.log(l);case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),a=function(){var e=Object(S.a)(N.a.mark((function e(t){var a,n;return N.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=t.target.closest("button").getAttribute("id"),console.log("\ud83c\udf6d",a),e.next=4,B.a.delete("/api/books/".concat(a));case 4:n=e.sent,console.log(n),window.location.reload();case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return o.a.createElement("div",{className:"bookbox"},console.log("\ud83c\udfc9 props",e),o.a.createElement("img",{style:{width:"128px"},src:e.imageLinks?e.imageLinks.thumbnail:e.image?e.image:"https://books.google.com/googlebooks/images/no_cover_thumb.gif",alt:"book-cover-".concat(e.title)}),o.a.createElement("div",{className:"bookbox-text"},o.a.createElement("div",{className:"bookbox-top"},o.a.createElement("p",{className:"bookbox-title"},o.a.createElement("span",{className:"bookbox-title--main"},e.title),e.authors&&o.a.createElement("span",{className:"bookbox-authors"},"Written By ",e.authors.map((t,a,n)=>o.a.createElement("span",{key:"".concat(e.infoLink?e.infoLink:e.link,"-").concat(a)},a!==n.length-1?"".concat(t,", "):"".concat(t))))),o.a.createElement("div",{className:"bookbox-button"},o.a.createElement(C.a,{variant:"outlined",color:"primary",href:e.infoLink?e.infoLink:e.link,target:"_blank"},"View"),e.isSearch?o.a.createElement(C.a,{variant:"outlined",color:"secondary",target:"_blank",onClick:t,data:JSON.stringify(e)},"Save"):o.a.createElement(C.a,{variant:"outlined",color:"secondary",target:"_blank",onClick:a,id:e._id},"Delete"))),o.a.createElement("p",{className:"bookbox-desc"},e.description)))};var A=({isSearch:e})=>{const t=Object(n.useState)(""),a=Object(h.a)(t,2),r=a[0],c=a[1],i=Object(n.useState)(null),s=Object(h.a)(i,2),l=s[0],u=s[1],m=Object(n.useMemo)(()=>e&&o.a.createElement(O,{onChange:c}),[e]);Object(n.useEffect)(()=>{e&&r&&(u("https://www.googleapis.com/books/v1/volumes?q=".concat(r)),c("")),e||(u("/api/books"),c("")),e&&!r&&u("")},[r,e]);const d=_(l);console.log("\ud83e\udd70data",d);let p=[];return d&&e&&d&&(p=[...new Map(d.items.map(e=>[e.id,e])).values()]),o.a.createElement("div",null,console.log("\ud83e\udd5cisSearch:",e,"data:",d,"query:",r,"fetchUrl:",l),o.a.createElement(j,{title:"title",accessory:m,books:d},e&&d?p.map(e=>o.a.createElement(W,Object.assign({key:e.id},e.volumeInfo,{isSearch:!0}))):!e&&d?d.items.map(e=>o.a.createElement(W,Object.assign({key:e.id,id:e.id},e))):""))};a(86);var I=function(){return o.a.createElement("div",{className:"App"},o.a.createElement(g,null),o.a.createElement(b,null),o.a.createElement(s.c,null,o.a.createElement(s.a,{exact:!0,path:"/",render:e=>o.a.createElement(A,Object.assign({},e,{isSearch:!0}))}),o.a.createElement(s.a,{path:"/saved",render:e=>o.a.createElement(A,Object.assign({},e,{isSearch:!1}))})))};const J=Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));function G(e){navigator.serviceWorker.register(e).then(e=>{e.onupdatefound=()=>{const t=e.installing;t.onstatechange=()=>{"installed"===t.state&&(navigator.serviceWorker.controller?console.log("New content is available; please refresh."):console.log("Content is cached for offline use."))}}}).catch(e=>{console.error("Error during service worker registration:",e)})}c.a.render(o.a.createElement(i.a,null,o.a.createElement(I,null)),document.getElementById("root")),function(){if("serviceWorker"in navigator){if(new URL("",window.location).origin!==window.location.origin)return;window.addEventListener("load",()=>{const e="".concat("","/service-worker.js");J?function(e){fetch(e).then(t=>{404===t.status||-1===t.headers.get("content-type").indexOf("javascript")?navigator.serviceWorker.ready.then(e=>{e.unregister().then(()=>{window.location.reload()})}):G(e)}).catch(()=>{console.log("No internet connection found. App is running in offline mode.")})}(e):G(e)})}}()}},[[52,1,2]]]);
//# sourceMappingURL=main.f5f42b78.chunk.js.map